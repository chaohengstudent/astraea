syntax = "proto3";

package org.astraea.common.generated;

message ClusterInfo{

  message Broker {
    message Datafolder {
      string path = 1;
      map<string, int64> partitionSizes = 2;
      map<string, int64> orphanPartitionSizes = 3;
    }

    message TopicPartition {
      int32 partition = 1;
      string topic = 2;
    }

    int32 id = 1;
    string host = 2;
    int32 port = 3;
    bool isController = 4;
    map<string, string> config = 5;
    repeated Datafolder datafolder = 6;
    repeated TopicPartition topicPartitions = 7;
    repeated TopicPartition topicPartitionLeaders = 8;
  }

  message Topic {
    string name = 1;
    map<string, string> config = 2;
    bool internal = 3;
    repeated int32 partition = 4;
  }

  message Replica{
    message NodeInfo {
      int32 id = 1;
      string host = 2;
      int32 port = 3;
    }

    string topic = 1;
    int32  partition = 2;
    NodeInfo nodeInfo = 3;
    int64 lag = 4;
    int64 size = 5;
    bool isLeader = 6;
    bool isSync = 7;
    bool isFuture = 8;
    bool isOffline = 9;
    bool isPreferredLeader = 10;
    string path = 11;
  }

  string clusterId = 1;
  repeated Broker broker = 2;
  repeated Topic topic = 3;
  repeated Replica replica = 4;
}